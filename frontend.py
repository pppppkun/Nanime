import streamlit as st
from rss import parse_rss


st.set_page_config(
    page_title="NAnime",
    page_icon="ğŸ‰",
    menu_items={
        'Get Help': 'https://TODO',
        'Report a bug': "https://TODO",
        'About': "TODO"
    }
)


def startup():
    st.write("""
            # Welcome to NAnime!
            è¿™æ˜¯éƒ¨ç½²åœ¨NJUå†…ç½‘çš„åŠ¨æ¼«ä¸‹è½½ç½‘ç«™ã€‚ä½ å¯ä»¥é€šè¿‡[èœœæŸ‘è®¡åˆ’](https://mikanani.me/)æ¥å¯»æ‰¾ç•ªå‰§å¯¹åº”çš„RSSï¼Œç„¶åå°†å…¶å¡«å…¥ä¸‹åˆ—çš„è¡¨å•ä¹‹ä¸­ã€‚
            è¯¥ç½‘ç«™ä¼šè‡ªåŠ¨å¯¹RSSè¿›è¡Œè§£æï¼Œå¹¶å¯¹ç•ªå‰§å†…å®¹è¿›è¡Œä¸‹è½½ã€‚
            """
            )

    st.write("""
            å·²ç»ä¸‹è½½è¿‡çš„ç•ªå‰§ä¼šä¿ç•™ï¼Œå› æ­¤**ä¸ä¼šé‡å¤ä¸‹è½½**å·²ç»ä¸‹è½½è¿‡çš„å†…å®¹ã€‚
            å¯¹äºä¸‹è½½è¿‡çš„ç•ªå‰§ï¼Œä½ å¯ä»¥é€‰æ‹©é€šè¿‡è¯¥ç½‘é¡µæ‰“åŒ…ä¸‹è½½åˆ°ä½ çš„æœ¬åœ°è¿›è¡Œè§‚çœ‹ï¼Œ
            æˆ–è€…é€šè¿‡ä¸åŒçš„æ’­æ”¾å™¨æ¥è¿æ¥å¦ä¸€ä¸ªç«™ç‚¹è¿›è¡Œåœ¨çº¿è§‚çœ‹ã€‚
            å› ä¸ºæ ¡å†…ç½‘çš„åŸå› ï¼Œä½ å¯ä»¥äº«å—éå¸¸å¿«çš„ç½‘é€Ÿã€‚
            """)

    st.info("""
            è¯·æ³¨æ„ï¼ŒåŒä¸€ä¸ªç•ªå‰§å­˜åœ¨å¤šä¸ªå­—å¹•ç»„ã€‚æœ¬ç½‘ç«™ä»…ä¸‹è½½RSSé“¾æ¥ä¸­
            **ç¬¬ä¸€ä¸ªå‡ºç°çš„å­—å¹•ç»„**çš„èµ„æºã€‚å¦å¤–ï¼Œå¯¹äºå­˜åœ¨å¤šä¸ªå­—å¹•çš„æƒ…å†µï¼Œæœ¬ç½‘ç«™ä»…ä¸‹è½½ç®€ä½“èµ„æºï¼Œå¿½ç•¥ç¹ä½“èµ„æºã€‚
            """)

    st.info("æœ¬ç½‘ç«™çš„å…¨éƒ¨ä»£ç å·²ç»å¼€æºã€‚ä¸å«å¹¿å‘Šï¼Œä¹Ÿä¸ä¼šå­˜å‚¨ä»»ä½•ç”¨æˆ·ä¿¡æ¯")



def register_rss():
    rss_link = st.text_input("è¯·è¾“å…¥åŠ¨æ¼«çš„ RSS é“¾æ¥:")

    if st.button("æäº¤", key='rss'):
        if rss_link:
            # st.success(f"ä½ è¾“å…¥çš„ RSS é“¾æ¥æ˜¯: {rss_link}")
            parse_rss(rss_link)
        else:
            st.error("è¯·è¾“å…¥æœ‰æ•ˆçš„ RSS é“¾æ¥")

    st.write("æäº¤åä¼šæœ‰2ç§ç»“æœï¼Œå¦‚æœå°šæœªä¸‹è½½æˆ–è€…æœ‰äººæäº¤ä¼šæ˜¾ç¤º**ä¸‹è½½ä¸­**ï¼Œå…¶ä½™æ—¶å€™ä¼šæ˜¾ç¤º**å·²ä¸‹è½½**ï¼Œå¹¶ç»™å‡ºä¸‹è½½é“¾æ¥")

    st.write("ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ä¸‹é¢è¾“å…¥åŠ¨æ¼«çš„åå­—æ¥è·å–ä¸‹è½½é“¾æ¥ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰")    


def search_anime():
    anime_name = st.text_input("è¯·è¾“å…¥åŠ¨æ¼«çš„åå­—:")
    if st.button("æäº¤", key='search'):
        if anime_name:
            st.success(f"ä½ è¾“å…¥çš„ RSS é“¾æ¥æ˜¯: {rss_link}")
        else:
            st.error("è¯·è¾“å…¥æœ‰æ•ˆçš„ RSS é“¾æ¥")


def help():
    if st.toggle("### å¦‚ä½•è·å–åŠ¨æ¼« RSS"):

        st.write("#### æ­¥éª¤ 1: æ‰“å¼€[èœœæŸ‘è®¡åˆ’](https://mikanani.me/)")
        st.write("#### æ­¥éª¤ 2: æŸ¥æ‰¾ä½ æƒ³ä¸‹è½½çš„ç•ªå‰§")
        st.write("ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹æ³•æ¥æŸ¥æ‰¾ä½ æƒ³ä¸‹è½½çš„ç•ªå‰§ï¼š")
        if st.toggle("##### æ–¹æ³• 1: ä½¿ç”¨æœç´¢æ¡†æŸ¥æ‰¾"):
            st.write("ç›´æ¥åœ¨èœœæŸ‘è®¡åˆ’çš„æœç´¢æ¡†ä¸­è¾“å…¥ç•ªå‰§çš„åç§°ï¼Œè¿›è¡ŒæŸ¥æ‰¾å¹¶è¿›å…¥ç•ªå‰§é¡µé¢ã€‚")
            st.image("images/s2.1.png", caption="ä½¿ç”¨æœç´¢æ¡†æŸ¥æ‰¾ç•ªå‰§", use_column_width=True)

        if st.toggle("##### æ–¹æ³• 2: ç›´æ¥åœ¨ä¸»é¡µæœç´¢"):
            st.write("ä½ å¯ä»¥ç›´æ¥åœ¨ä¸»é¡µçœ‹åˆ°å½“å­£æ–°ç•ªï¼Œç„¶åç‚¹å‡»æ ‡é¢˜è¿›å…¥ç•ªå‰§é¡µé¢ã€‚")
            st.image("images/s2.2.png", caption="æŒ‰åˆ†ç±»æµè§ˆç•ªå‰§", use_column_width=True)


        st.write("#### æ­¥éª¤ 3: è·å–RSS")
        st.write("åœ¨ç•ªå‰§è¯¦æƒ…é¡µé¢ä¸­ï¼Œæ‰¾åˆ°å¹¶å¤åˆ¶å¯¹åº”çš„ RSS é“¾æ¥ã€‚")
        st.image("images/s3.png", caption="è·å–ç•ªå‰§çš„ RSS é“¾æ¥", use_column_width=True)


        st.write("#### æ­¥éª¤ 4: å¡«å†™RSSé“¾æ¥")
        st.write("å°†ä¸Šä¸€æ­¥è·å–åˆ°çš„ RSS é“¾æ¥å¡«å…¥ä¸Šæ–¹çš„ç©ºæ ¼ä¹‹ä¸­ã€‚")


startup()
register_rss()
search_anime()
help()